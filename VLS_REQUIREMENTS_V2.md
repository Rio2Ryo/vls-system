# VLS System v2 — 完全仕様書

## デザイン方針
- **白ベース・クリーン・透明感**：チープなディズニーもどきではなく、清潔感のある子供向けデザイン
- カラフルだが統一感あり：白 + パステル系アクセントカラー（水色・ピンク・黄色）
- フォント：丸みのある日本語フォント（Noto Sans JP等）
- アニメーション：Framer Motionで柔らかいフワフワした動き
- アイコン：絵文字 or Heroicons（シンプル）
- カード・ボタン：白 + 薄いシャドウ + 角丸
- 背景：白 or 超薄いグラデーション（白→水色系）

---

## STEP 0：パスワード認証画面

### UI
- ロゴ + タイトル（イベント名等）
- パスワード入力フォーム（数字・文字混合対応）
- 送信ボタン
- エラー時：「パスワードが違います」メッセージ

### ロジック
- パスワードによって紐づくフォルダ（イベント）が変わる
- 例パスワード：
  - `SUMMER2026` → 夏祭り2026の写真フォルダ
  - `SPORTS2026` → 運動会2026の写真フォルダ  
  - `GRADUATION2026` → 卒業式2026の写真フォルダ
- パスワードとフォルダ（イベントID）のマッピングはAdminで設定

---

## STEP 1：アンケート（興味タグ選択）

### UI
- Q1〜Q3（最大3問）
- 各質問：選択肢をタグ形式で表示（最大3つまで選択可）
- 「選択上限3つ」のバリデーション
- 「次へ」ボタン

### デフォルト質問例
- Q1: 親子で興味があるテーマは？（教育/スポーツ/食/旅行/テクノロジー/アート/自然/その他）
- Q2: 気になるサービスは？（学習塾/習い事/食品/旅行/スマホ/カメラ/保険/その他）
- Q3: お子様の年齢は？（0-3歳/4-6歳/7-9歳/10-12歳/13歳以上）

### ロジック
- 回答タグをSTEP 2の後半CM企業マッチングに使用
- アンケートはAdminで問題・選択肢を設定可能

---

## STEP 2：ライブラリ読み込み（計45秒・強制）

### UI
- 「イベントの全写真データを読み込んでいます...」
- プログレスバー（45秒で100%になるアニメーション）
- かわいいローディングキャラクター or アニメーション
- 下部に動画プレイヤー（自動再生・全画面気味）

### 動画構成（合計45秒）
1. **前半15秒**：プラチナ固定CM（提供メッセージ「今日の写真は〇〇社からのプレゼントです！」的な）
2. **後半30秒**：アンケートタグマッチング企業の予告編CM

### 強制視聴
- スキップ不可
- 45秒未満では次に進めない（progressが100%になるまでボタン非活性）

---

## STEP 3：写真一覧（透かし入り）

### UI
- グリッド表示（3〜4列）
- 全写真に透かし（ウォーターマーク）が入った低画質バージョン
- 写真クリック → 詳細モーダル（透かし入り大画像）
- 「高画質でダウンロード」ボタン

### ロジック
- 実際の高画質画像はサーバーに保存
- 表示用は自動生成した低画質・透かし版
- スクリーンショット対策：CSS `user-select: none`、右クリック無効化

---

## STEP 4：ダウンロード待機（60秒・強制）

### UI
- 「高画質データを生成中...」進捗バー（60秒）
- 動画プレイヤー（STEP 2後半で当選した企業の本編60秒）
- 動画終了まで「ダウンロード」ボタン非活性

### 動画
- STEP 2で予告を見せた企業の本編（60秒）を連動再生

---

## STEP 5：オファー＆ダウンロード

### UI
- 動画終了と同時に出現
- ① プラチナ企業ロゴ入り記念フレーム合成写真の「保存」ボタン
- ② 限定クーポン・特別オファーのカード（企業ページへリンク）

---

## 配信アルゴリズム

### 前半15秒（プラチナ固定）
- プラチナ登録企業（最大3社）からランダムで1社選出
- 提供CM動画を再生

### 後半30秒（タグマッチング抽選）
ケースA（プラチナ＋ゴールド＋一般が全重複）: Pt=40%, Gd=40%, OP=20%
ケースB（プラチナ＋ゴールドのみ）: Pt=50%, Gd=50%
ケースC（ゴールド＋一般のみ）: Gd=80%, OP=20%
ケースD（プラチナ＋一般のみ）: Pt=80%, OP=20%
単独マッチ: 100%でその企業

---

## 管理画面（Admin）

### 認証
- `/admin` へのアクセスにAdminパスワード（例: `ADMIN_VLS_2026`）

### 機能一覧

#### 1. イベント管理
- イベント名・日付・説明
- アクセスパスワード設定
- 紐づくフォルダ（写真セット）設定

#### 2. 写真管理
- ドラッグ＆ドロップ一括アップロード
- アップロード時自動処理：
  - 原本（高画質）保存
  - 低画質＋透かし版を自動生成（canvas API or sharp等）
  - 透かしテキスト：「© VLS System」or カスタム設定可

#### 3. パートナー企業管理
- 会社名・ロゴ・ランク（Platinum/Gold/Silver/Bronze）
- タグ（興味カテゴリ）設定
- 動画登録：
  - 前半用CM（15秒）
  - 後半用予告編（30秒）
  - 本編（60秒）

#### 4. アンケート設定
- Q1〜Q3の質問文・選択肢設定

#### 5. ダッシュボード
- イベント別アクセス数
- CM再生数・企業別
- ダウンロード数

---

## 技術スタック
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS（白ベース）
- Framer Motion
- ローカルストレージ or SQLite (Vercel) for demo
- 動画：HTMLビデオタグ（デモはサンプル動画URL）
- 画像処理：Canvas API（ブラウザ側でウォーターマーク）
- デプロイ：Vercel

## デモデータ
- パスワード3種類（上記）
- 企業3〜4社（Platinum×1, Gold×1, Silver×1, Bronze×1）
- サンプル動画（YouTube埋め込みでも可、15s/30s/60sに分割）
- サンプル写真（Unsplash APIなどから取得）
